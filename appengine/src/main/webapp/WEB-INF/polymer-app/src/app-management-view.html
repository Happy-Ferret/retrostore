<html><head></head><body><div hidden="" by-polymer-bundler=""><script>Polymer.IronCheckedElementBehaviorImpl={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:"_checkedChanged"},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:"on",observer:"_valueChanged"}},observers:["_requiredChanged(required)"],created:function(){this._hasIronCheckedElementBehavior=!0},_getValidity:function(_value){return this.disabled||!this.required||this.checked},_requiredChanged:function(){if(this.required){this.setAttribute("aria-required","true")}else{this.removeAttribute("aria-required")}},_checkedChanged:function(){this.active=this.checked;this.fire("iron-change")},_valueChanged:function(){if(this.value===void 0||null===this.value){this.value="on"}}};Polymer.IronCheckedElementBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronCheckedElementBehaviorImpl];</script><script>Polymer.PaperCheckedElementBehaviorImpl={_checkedChanged:function(){Polymer.IronCheckedElementBehaviorImpl._checkedChanged.call(this);if(this.hasRipple()){if(this.checked){this._ripple.setAttribute("checked","")}else{this._ripple.removeAttribute("checked")}}},_buttonStateChanged:function(){Polymer.PaperRippleBehavior._buttonStateChanged.call(this);if(this.disabled){return}if(this.isAttached){this.checked=this.active}}};Polymer.PaperCheckedElementBehavior=[Polymer.PaperInkyFocusBehavior,Polymer.IronCheckedElementBehavior,Polymer.PaperCheckedElementBehaviorImpl];</script><dom-module id="paper-checkbox" assetpath="../bower_components/paper-checkbox/"><template strip-whitespace=""><style>:host{display:inline-block;white-space:nowrap;cursor:pointer;--calculated-paper-checkbox-size:var(--paper-checkbox-size, 18px);--calculated-paper-checkbox-ink-size:var(--paper-checkbox-ink-size, -1px);@apply --paper-font-common-base;line-height:0;-webkit-tap-highlight-color:transparent;}:host([hidden]){display:none !important;}:host(:focus){outline:none;}.hidden{display:none;}#checkboxContainer{display:inline-block;position:relative;width:var(--calculated-paper-checkbox-size);height:var(--calculated-paper-checkbox-size);min-width:var(--calculated-paper-checkbox-size);margin:var(--paper-checkbox-margin, initial);vertical-align:var(--paper-checkbox-vertical-align, middle);background-color:var(--paper-checkbox-unchecked-background-color, transparent);}#ink{position:absolute;top:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);left:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);width:var(--calculated-paper-checkbox-ink-size);height:var(--calculated-paper-checkbox-ink-size);color:var(--paper-checkbox-unchecked-ink-color, var(--primary-text-color));opacity:0.6;pointer-events:none;}#ink:dir(rtl){right:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);left:auto;}#ink[checked]{color:var(--paper-checkbox-checked-ink-color, var(--primary-color));}#checkbox{position:relative;box-sizing:border-box;height:100%;border:solid 2px;border-color:var(--paper-checkbox-unchecked-color, var(--primary-text-color));border-radius:2px;pointer-events:none;-webkit-transition:background-color 140ms, border-color 140ms;transition:background-color 140ms, border-color 140ms;}#checkbox.checked #checkmark{-webkit-animation:checkmark-expand 140ms ease-out forwards;animation:checkmark-expand 140ms ease-out forwards;}@-webkit-keyframes checkmark-expand{0%{-webkit-transform:scale(0, 0) rotate(45deg);}100%{-webkit-transform:scale(1, 1) rotate(45deg);}}@keyframes checkmark-expand{0%{transform:scale(0, 0) rotate(45deg);}100%{transform:scale(1, 1) rotate(45deg);}}#checkbox.checked{background-color:var(--paper-checkbox-checked-color, var(--primary-color));border-color:var(--paper-checkbox-checked-color, var(--primary-color));}#checkmark{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-paper-checkbox-size));border-bottom-width:calc(2/15 * var(--calculated-paper-checkbox-size));border-color:var(--paper-checkbox-checkmark-color, white);-webkit-transform-origin:97% 86%;transform-origin:97% 86%;box-sizing:content-box;}#checkmark:dir(rtl){-webkit-transform-origin:50% 14%;transform-origin:50% 14%;}#checkboxLabel{position:relative;display:inline-block;vertical-align:middle;padding-left:var(--paper-checkbox-label-spacing, 8px);white-space:normal;line-height:normal;color:var(--paper-checkbox-label-color, var(--primary-text-color));@apply --paper-checkbox-label;}:host([checked]) #checkboxLabel{color:var(--paper-checkbox-label-checked-color, var(--paper-checkbox-label-color, var(--primary-text-color)));@apply --paper-checkbox-label-checked;}#checkboxLabel:dir(rtl){padding-right:var(--paper-checkbox-label-spacing, 8px);padding-left:0;}#checkboxLabel[hidden]{display:none;}:host([disabled]) #checkbox{opacity:0.5;border-color:var(--paper-checkbox-unchecked-color, var(--primary-text-color));}:host([disabled][checked]) #checkbox{background-color:var(--paper-checkbox-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled]) #checkboxLabel{opacity:0.65;}#checkbox.invalid:not(.checked){border-color:var(--paper-checkbox-error-color, var(--error-color));}</style><div id="checkboxContainer"><div id="checkbox" class$="[[_computeCheckboxClass(checked, invalid)]]"><div id="checkmark" class$="[[_computeCheckmarkClass(checked)]]"></div></div></div><div id="checkboxLabel"><slot></slot></div></template><script>Polymer({is:"paper-checkbox",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"checkbox","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){var inkSize=this.getComputedStyleValue("--calculated-paper-checkbox-ink-size").trim();if("-1px"===inkSize){var checkboxSizeText=this.getComputedStyleValue("--calculated-paper-checkbox-size").trim(),units="px",unitsMatches=checkboxSizeText.match(/[A-Za-z]+$/);if(null!==unitsMatches){units=unitsMatches[0]}var checkboxSize=parseFloat(checkboxSizeText),defaultInkSize=8/3*checkboxSize;if("px"===units){defaultInkSize=Math.floor(defaultInkSize);if(defaultInkSize%2!==checkboxSize%2){defaultInkSize++}}this.updateStyles({"--paper-checkbox-ink-size":defaultInkSize+units})}})},_computeCheckboxClass:function(checked,invalid){var className="";if(checked){className+="checked "}if(invalid){className+="invalid"}return className},_computeCheckmarkClass:function(checked){return checked?"":"hidden"},_createRipple:function(){this._rippleContainer=this.$.checkboxContainer;return Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)}});</script></dom-module><script>(function(){"use strict";Polymer.PaperDialogBehaviorImpl={hostAttributes:{role:"dialog",tabindex:"-1"},properties:{modal:{type:Boolean,value:!1},__readied:{type:Boolean,value:!1}},observers:["_modalChanged(modal, __readied)"],listeners:{tap:"_onDialogClick"},ready:function(){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick;this.__prevNoCancelOnEscKey=this.noCancelOnEscKey;this.__prevWithBackdrop=this.withBackdrop;this.__readied=!0},_modalChanged:function(modal,readied){if(!readied){return}if(modal){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick;this.__prevNoCancelOnEscKey=this.noCancelOnEscKey;this.__prevWithBackdrop=this.withBackdrop;this.noCancelOnOutsideClick=!0;this.noCancelOnEscKey=!0;this.withBackdrop=!0}else{this.noCancelOnOutsideClick=this.noCancelOnOutsideClick&&this.__prevNoCancelOnOutsideClick;this.noCancelOnEscKey=this.noCancelOnEscKey&&this.__prevNoCancelOnEscKey;this.withBackdrop=this.withBackdrop&&this.__prevWithBackdrop}},_updateClosingReasonConfirmed:function(confirmed){this.closingReason=this.closingReason||{};this.closingReason.confirmed=confirmed},_onDialogClick:function(event){for(var path=Polymer.dom(event).path,i=0,l=path.indexOf(this),target;i<l;i++){target=path[i];if(target.hasAttribute&&(target.hasAttribute("dialog-dismiss")||target.hasAttribute("dialog-confirm"))){this._updateClosingReasonConfirmed(target.hasAttribute("dialog-confirm"));this.close();event.stopPropagation();break}}}};Polymer.PaperDialogBehavior=[Polymer.IronOverlayBehavior,Polymer.PaperDialogBehaviorImpl]})();</script><dom-module id="paper-dialog-shared-styles" assetpath="../bower_components/paper-dialog-behavior/"><template><style>:host{display:block;margin:24px 40px;background:var(--paper-dialog-background-color, var(--primary-background-color));color:var(--paper-dialog-color, var(--primary-text-color));@apply --paper-font-body1;@apply --shadow-elevation-16dp;@apply --paper-dialog;}:host > ::slotted(*){margin-top:20px;padding:0 24px;}:host > ::slotted(.no-padding){padding:0;}:host > ::slotted(*:first-child){margin-top:24px;}:host > ::slotted(*:last-child){margin-bottom:24px;}:host > ::slotted(h2){position:relative;margin:0;@apply --paper-font-title;@apply --paper-dialog-title;}:host > ::slotted(h2:first-child){margin-top:24px;@apply --paper-dialog-title;}:host > ::slotted(h2:last-child){margin-bottom:24px;@apply --paper-dialog-title;}:host > ::slotted(.paper-dialog-buttons),
      :host > ::slotted(.buttons){position:relative;padding:8px 8px 8px 24px;margin:0;color:var(--paper-dialog-button-color, var(--primary-color));@apply --layout-horizontal;@apply --layout-end-justified;}</style></template></dom-module><dom-module id="paper-dialog" assetpath="../bower_components/paper-dialog/"><template><style include="paper-dialog-shared-styles"></style><slot></slot></template></dom-module><script>Polymer({is:"paper-dialog",behaviors:[Polymer.PaperDialogBehavior,Polymer.NeonAnimationRunnerBehavior],listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},_renderOpened:function(){this.cancelAnimation();this.playAnimation("entry")},_renderClosed:function(){this.cancelAnimation();this.playAnimation("exit")},_onNeonAnimationFinish:function(){if(this.opened){this._finishRenderOpened()}else{this._finishRenderClosed()}}});</script><dom-module id="iron-autogrow-textarea" assetpath="../bower_components/iron-autogrow-textarea/"><template><style>:host{display:inline-block;position:relative;width:400px;border:1px solid;padding:2px;-moz-appearance:textarea;-webkit-appearance:textarea;overflow:hidden;}.mirror-text{visibility:hidden;word-wrap:break-word;@apply --iron-autogrow-textarea;}.fit{@apply --layout-fit;}textarea{position:relative;outline:none;border:none;resize:none;background:inherit;color:inherit;width:100%;height:100%;font-size:inherit;font-family:inherit;line-height:inherit;text-align:inherit;@apply --iron-autogrow-textarea;}textarea::-webkit-input-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea:-moz-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea::-moz-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea:-ms-input-placeholder{@apply --iron-autogrow-textarea-placeholder;}</style><div id="mirror" class="mirror-text" aria-hidden="true">&nbsp;</div><div class="textarea-container fit"><textarea id="textarea" name$="[[name]]" aria-label$="[[label]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" disabled$="[[disabled]]" rows$="[[rows]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]"></textarea></div></template></dom-module><script>Polymer({is:"iron-autogrow-textarea",behaviors:[Polymer.IronValidatableBehavior,Polymer.IronControlState],properties:{value:{observer:"_valueChanged",type:String,notify:!0},bindValue:{observer:"_bindValueChanged",type:String,notify:!0},rows:{type:Number,value:1,observer:"_updateCached"},maxRows:{type:Number,value:0,observer:"_updateCached"},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,value:!1},inputmode:{type:String},placeholder:{type:String},readonly:{type:String},required:{type:Boolean},minlength:{type:Number},maxlength:{type:Number},label:{type:String}},listeners:{input:"_onInput"},get textarea(){return this.$.textarea},get selectionStart(){return this.$.textarea.selectionStart},get selectionEnd(){return this.$.textarea.selectionEnd},set selectionStart(value){this.$.textarea.selectionStart=value},set selectionEnd(value){this.$.textarea.selectionEnd=value},attached:function(){var IS_IOS=navigator.userAgent.match(/iP(?:[oa]d|hone)/);if(IS_IOS){this.$.textarea.style.marginLeft="-3px"}},validate:function(){var valid=this.$.textarea.validity.valid;if(valid){if(this.required&&""===this.value){valid=!1}else if(this.hasValidator()){valid=Polymer.IronValidatableBehavior.validate.call(this,this.value)}}this.invalid=!valid;this.fire("iron-input-validate");return valid},_bindValueChanged:function(bindValue){this.value=bindValue},_valueChanged:function(value){var textarea=this.textarea;if(!textarea){return}if(textarea.value!==value){textarea.value=!(value||0===value)?"":value}this.bindValue=value;this.$.mirror.innerHTML=this._valueForMirror();this.fire("bind-value-changed",{value:this.bindValue})},_onInput:function(event){var eventPath=Polymer.dom(event).path;this.value=eventPath?eventPath[0].value:event.target.value},_constrain:function(tokens){var _tokens;tokens=tokens||[""];if(0<this.maxRows&&tokens.length>this.maxRows){_tokens=tokens.slice(0,this.maxRows)}else{_tokens=tokens.slice(0)}while(0<this.rows&&_tokens.length<this.rows){_tokens.push("")}return _tokens.join("<br/>")+"&#160;"},_valueForMirror:function(){var input=this.textarea;if(!input){return}this.tokens=input&&input.value?input.value.replace(/&/gm,"&amp;").replace(/"/gm,"&quot;").replace(/'/gm,"&#39;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").split("\n"):[""];return this._constrain(this.tokens)},_updateCached:function(){this.$.mirror.innerHTML=this._constrain(this.tokens)}});</script><dom-module id="paper-textarea" assetpath="../bower_components/paper-input/"><template><style>:host{display:block;}:host([hidden]){display:none !important;}label{pointer-events:none;}</style><paper-input-container no-label-float$="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]"><label hidden$="[[!label]]" aria-hidden="true" for$="[[_inputId]]" slot="label">[[label]]</label><iron-autogrow-textarea class="paper-input-input" slot="input" id$="[[_inputId]]" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" bind-value="{{value}}" invalid="{{invalid}}" validator$="[[validator]]" disabled$="[[disabled]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" autocapitalize$="[[autocapitalize]]" rows$="[[rows]]" max-rows$="[[maxRows]]" on-change="_onChange"></iron-autogrow-textarea><template is="dom-if" if="[[errorMessage]]"><paper-input-error aria-live="assertive" slot="add-on">[[errorMessage]]</paper-input-error></template><template is="dom-if" if="[[charCounter]]"><paper-input-char-counter slot="add-on"></paper-input-char-counter></template></paper-input-container></template></dom-module><script>Polymer({is:"paper-textarea",behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],properties:{_ariaLabelledBy:{observer:"_ariaLabelledByChanged",type:String},_ariaDescribedBy:{observer:"_ariaDescribedByChanged",type:String},value:{type:String},rows:{type:Number,value:1},maxRows:{type:Number,value:0}},get selectionStart(){return this.$.input.textarea.selectionStart},set selectionStart(start){this.$.input.textarea.selectionStart=start},get selectionEnd(){return this.$.input.textarea.selectionEnd},set selectionEnd(end){this.$.input.textarea.selectionEnd=end},_ariaLabelledByChanged:function(ariaLabelledBy){this._focusableElement.setAttribute("aria-labelledby",ariaLabelledBy)},_ariaDescribedByChanged:function(ariaDescribedBy){this._focusableElement.setAttribute("aria-describedby",ariaDescribedBy)},get _focusableElement(){return this.inputElement.textarea}});</script><iron-iconset-svg name="vaadin-upload" size="24"><svg><defs><g id="clear"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g><g id="done"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path></g><g id="file-upload"><path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"></path></g><g id="refresh"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path></g><g id="start"><path d="M8 5v14l11-7z"></path></g><g id="warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></g></defs></svg></iron-iconset-svg><script>Polymer.IronRangeBehavior={properties:{value:{type:Number,value:0,notify:!0,reflectToAttribute:!0},min:{type:Number,value:0,notify:!0},max:{type:Number,value:100,notify:!0},step:{type:Number,value:1,notify:!0},ratio:{type:Number,value:0,readOnly:!0,notify:!0}},observers:["_update(value, min, max, step)"],_calcRatio:function(value){return(this._clampValue(value)-this.min)/(this.max-this.min)},_clampValue:function(value){return Math.min(this.max,Math.max(this.min,this._calcStep(value)))},_calcStep:function(value){value=parseFloat(value);if(!this.step){return value}var numSteps=Math.round((value-this.min)/this.step);if(1>this.step){return numSteps/(1/this.step)+this.min}else{return numSteps*this.step+this.min}},_validateValue:function(){var v=this._clampValue(this.value);this.value=this.oldValue=isNaN(v)?this.oldValue:v;return this.value!==v},_update:function(){this._validateValue();this._setRatio(100*this._calcRatio(this.value))}};</script><dom-module id="paper-progress" assetpath="../bower_components/paper-progress/"><template><style>:host{display:block;width:200px;position:relative;overflow:hidden;}:host([hidden]), [hidden]{display:none !important;}#progressContainer{@apply --paper-progress-container;position:relative;}#progressContainer,
      /* the stripe for the indeterminate animation*/
      .indeterminate::after{height:var(--paper-progress-height, 4px);}#primaryProgress,
      #secondaryProgress,
      .indeterminate::after{@apply --layout-fit;}#progressContainer,
      .indeterminate::after{background:var(--paper-progress-container-color, var(--google-grey-300));}:host(.transiting) #primaryProgress,
      :host(.transiting) #secondaryProgress{-webkit-transition-property:-webkit-transform;transition-property:transform;-webkit-transition-duration:var(--paper-progress-transition-duration, 0.08s);transition-duration:var(--paper-progress-transition-duration, 0.08s);-webkit-transition-timing-function:var(--paper-progress-transition-timing-function, ease);transition-timing-function:var(--paper-progress-transition-timing-function, ease);-webkit-transition-delay:var(--paper-progress-transition-delay, 0s);transition-delay:var(--paper-progress-transition-delay, 0s);}#primaryProgress,
      #secondaryProgress{@apply --layout-fit;-webkit-transform-origin:left center;transform-origin:left center;-webkit-transform:scaleX(0);transform:scaleX(0);will-change:transform;}#primaryProgress{background:var(--paper-progress-active-color, var(--google-green-500));}#secondaryProgress{background:var(--paper-progress-secondary-color, var(--google-green-100));}:host([disabled]) #primaryProgress{background:var(--paper-progress-disabled-active-color, var(--google-grey-500));}:host([disabled]) #secondaryProgress{background:var(--paper-progress-disabled-secondary-color, var(--google-grey-300));}:host(:not([disabled])) #primaryProgress.indeterminate{-webkit-transform-origin:right center;transform-origin:right center;-webkit-animation:indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;animation:indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;}:host(:not([disabled])) #primaryProgress.indeterminate::after{content:"";-webkit-transform-origin:center center;transform-origin:center center;-webkit-animation:indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;animation:indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;}@-webkit-keyframes indeterminate-bar{0%{-webkit-transform:scaleX(1) translateX(-100%);}50%{-webkit-transform:scaleX(1) translateX(0%);}75%{-webkit-transform:scaleX(1) translateX(0%);-webkit-animation-timing-function:cubic-bezier(.28,.62,.37,.91);}100%{-webkit-transform:scaleX(0) translateX(0%);}}@-webkit-keyframes indeterminate-splitter{0%{-webkit-transform:scaleX(.75) translateX(-125%);}30%{-webkit-transform:scaleX(.75) translateX(-125%);-webkit-animation-timing-function:cubic-bezier(.42,0,.6,.8);}90%{-webkit-transform:scaleX(.75) translateX(125%);}100%{-webkit-transform:scaleX(.75) translateX(125%);}}@keyframes indeterminate-bar{0%{transform:scaleX(1) translateX(-100%);}50%{transform:scaleX(1) translateX(0%);}75%{transform:scaleX(1) translateX(0%);animation-timing-function:cubic-bezier(.28,.62,.37,.91);}100%{transform:scaleX(0) translateX(0%);}}@keyframes indeterminate-splitter{0%{transform:scaleX(.75) translateX(-125%);}30%{transform:scaleX(.75) translateX(-125%);animation-timing-function:cubic-bezier(.42,0,.6,.8);}90%{transform:scaleX(.75) translateX(125%);}100%{transform:scaleX(.75) translateX(125%);}}</style><div id="progressContainer"><div id="secondaryProgress" hidden$="[[_hideSecondaryProgress(secondaryRatio)]]"></div><div id="primaryProgress"></div></div></template></dom-module><script>Polymer({is:"paper-progress",behaviors:[Polymer.IronRangeBehavior],properties:{secondaryProgress:{type:Number,value:0},secondaryRatio:{type:Number,value:0,readOnly:!0},indeterminate:{type:Boolean,value:!1,observer:"_toggleIndeterminate"},disabled:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_disabledChanged"}},observers:["_progressChanged(secondaryProgress, value, min, max, indeterminate)"],hostAttributes:{role:"progressbar"},_toggleIndeterminate:function(indeterminate){this.toggleClass("indeterminate",indeterminate,this.$.primaryProgress)},_transformProgress:function(progress,ratio){var transform="scaleX("+ratio/100+")";progress.style.transform=progress.style.webkitTransform=transform},_mainRatioChanged:function(ratio){this._transformProgress(this.$.primaryProgress,ratio)},_progressChanged:function(secondaryProgress,value,min,max,indeterminate){secondaryProgress=this._clampValue(secondaryProgress);value=this._clampValue(value);var secondaryRatio=100*this._calcRatio(secondaryProgress),mainRatio=100*this._calcRatio(value);this._setSecondaryRatio(secondaryRatio);this._transformProgress(this.$.secondaryProgress,secondaryRatio);this._transformProgress(this.$.primaryProgress,mainRatio);this.secondaryProgress=secondaryProgress;if(indeterminate){this.removeAttribute("aria-valuenow")}else{this.setAttribute("aria-valuenow",value)}this.setAttribute("aria-valuemin",min);this.setAttribute("aria-valuemax",max)},_disabledChanged:function(disabled){this.setAttribute("aria-disabled",disabled?"true":"false")},_hideSecondaryProgress:function(secondaryRatio){return 0===secondaryRatio}});</script><dom-module id="vaadin-upload-file" assetpath="../bower_components/vaadin-upload/"><template><style>:host{@apply --layout-vertical;margin:4px 0 0;padding:6px 0 4px;@apply --vaadin-upload-file;}#row{@apply --layout-horizontal;@apply --layout-center;height:36px;@apply --vaadin-upload-file-row;}iron-icon{width:24px;height:24px;padding:8px;color:var(--primary-text-color, #000);opacity:0;margin-right:-40px;transition:margin-right 0.3s 0.1s, opacity 0.3s;@apply --vaadin-upload-file-status-icon;}iron-icon[icon="vaadin-upload:warning"]{color:var(--error-color, #f40303);}iron-icon[complete],
      iron-icon[error]{margin-right:0;opacity:1;transition:margin-right 0.3s, opacity 0.3s 0.1s;}iron-icon[complete]{@apply --vaadin-upload-file-status-icon-complete;}iron-icon[error]{@apply --vaadin-upload-file-status-icon-error;}#meta{@apply --layout-vertical;@apply --layout-flex;height:32px;transition:height 0.1s;width:1px;color:var(--disabled-text-color, gray);overflow:hidden;@apply --vaadin-upload-file-meta;}#meta[complete]{height:16px;color:var(--primary-text-color, #000);@apply --vaadin-upload-file-meta-complete;}#meta[error]{color:var(--error-color, #f40303);@apply --vaadin-upload-file-meta-error;}#name,
      #status,
      #error{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:16px !important;}#name{@apply --paper-font-body2;@apply --vaadin-upload-file-name;}#status{@apply --paper-font-caption;color:var(--disabled-text-color, gray);@apply --vaadin-upload-file-status;}#error{@apply --paper-font-caption;color:var(--error-color, #f40303);@apply --vaadin-upload-file-error;}#commands{@apply --layout-horizontal;@apply --vaadin-upload-file-commands;}#commands [icon]{color:var(--primary-text-color, #000);}#commands [icon="vaadin-upload:start"],
      #commands [icon="vaadin-upload:refresh"],
      #commands [icon="vaadin-upload:clear"]{color:var(--primary-color, #00B4F0);}#commands .start{@apply --vaadin-upload-file-commands-start;}#commands .refresh{@apply --vaadin-upload-file-commands-refresh;}#commands .clear{@apply --vaadin-upload-file-commands-clear;}paper-progress{--paper-progress-active-color:var(--primary-color, #00B4F0);width:100%;height:2px;@apply --vaadin-upload-file-progress;}paper-progress[error]{--paper-progress-container-color:var(--error-color, #f40303);--paper-progress-active-color:var(--error-color, #f40303);@apply --vaadin-upload-file-progress-error;}paper-progress[indeterminate]{--paper-progress-container-color:var(--primary-color, #00B4F0);--paper-progress-active-color:rgba(1, 97, 155, 0.5);@apply --vaadin-upload-file-progress-indeterminate;}paper-progress[uploading][indeterminate]{--paper-progress-container-color:var(--divider-color, #e0e0e0);--paper-progress-active-color:var(--disabled-text-color, gray);@apply --vaadin-upload-file-progress-uploading-indeterminate;}paper-progress[complete]{@apply --vaadin-upload-file-progress-complete;}paper-icon-button[hidden]{display:none;}:host(.fade-out){animation-name:fade-out;animation-duration:0.6s;@apply --vaadin-upload-file-canceled;}@keyframes fade-out{0%{max-height:38px;}33%{max-height:38px;margin:4px 0 0;padding:6px 0 4px;opacity:0.25;}67%{opacity:0;}100%{max-height:0;margin:0;padding:0;opacity:0;}}</style><div id="row"><iron-icon icon="vaadin-upload:done" complete$="[[file.complete]]"></iron-icon><iron-icon icon="vaadin-upload:warning" error$="[[file.error]]"></iron-icon><div id="meta" complete$="[[file.complete]]" error$="[[file.error]]"><div id="name">[[file.name]]</div><div id="status" hidden$="[[!file.status]]">[[file.status]]</div><div id="error" hidden$="[[!file.error]]">[[file.error]]</div></div><div id="commands"><paper-icon-button class="start" icon="vaadin-upload:start" file-event="file-start" on-tap="_fireFileEvent" hidden$="[[!file.held]]"></paper-icon-button><paper-icon-button class="refresh" icon="vaadin-upload:refresh" file-event="file-retry" on-tap="_fireFileEvent" hidden$="[[!file.error]]"></paper-icon-button><paper-icon-button class="clear" icon="vaadin-upload:clear" file-event="file-abort" on-tap="_fireFileEvent"></paper-icon-button></div></div><paper-progress id="progress" value$="[[file.progress]]" error$="[[file.error]]" indeterminate$="[[file.indeterminate]]" uploading$="[[file.uploading]]" complete$="[[file.complete]]"></paper-progress></template></dom-module><script>Polymer({is:"vaadin-upload-file",properties:{file:Object},observers:["_fileChanged(file.*)","_fileAborted(file.abort)"],_fileChanged:function(){this.$.progress.updateStyles()},ready:function(){this.addEventListener("animationend",function(e){if(-1<e.animationName.indexOf("fade-out")){this._remove()}})},_fileAborted:function(abort){if(abort){this.toggleClass("fade-out",!0);var animationName=window.getComputedStyle(this).animationName;if(!animationName||"none"===animationName){this._remove()}}},_remove:function(){this.toggleClass("fade-out",!1);this.fire("file-remove",{file:this.file})},_fireFileEvent:function(e){e.preventDefault();var button=Polymer.dom(e).localTarget;return this.fire(button.getAttribute("file-event"),{file:this.file})}});</script><dom-module id="vaadin-upload" assetpath="../bower_components/vaadin-upload/"><template><style>:host{@apply --layout-vertical;display:block;position:relative;text-align:left;}:host(:not([nodrop])){border:1px dashed;border-color:var(--divider-color, #666);border-radius:3px;overflow:hidden;padding:16px;}:host([dragover-valid]){border-color:var(--primary-color, #00B4F0);}:host::before{@apply --layout-fit;content:'';display:none;z-index:10;}:host([dragover])::before{display:block;}#dragRipple{color:var(--light-primary-color, #7CD8F7);@apply --vaadin-upload-drag-ripple;}#dropLabel{@apply --layout-flex;@apply --paper-font-body2;position:relative;padding:.43em .57em;margin:0 .29em;color:var(--disabled-text-color, #b3b3b3);@apply --vaadin-upload-drop-label;}:host([dragover-valid]) #dropLabel{color:var(--primary-color, #00B4F0);@apply --vaadin-upload-drop-label-dragover;}#dropLabel ::slotted(iron-icon),
      #dropLabelIcon{margin-right:.25em;@apply --vaadin-upload-drop-label-icon;}#fileList{position:relative;@apply --vaadin-upload-file-list;}#buttons{@apply --layout-horizontal;position:relative;@apply --vaadin-upload-buttons;}#buttonsPrimary{@apply --layout-horizontal;@apply --layout-flex;@apply --layout-start;margin-left:-.29em;@apply --vaadin-upload-buttons-primary;}#addFiles{@apply --vaadin-upload-button-add-wrapper;}#addButton{@apply --paper-font-button;padding:.43em .57em;background:var(--primary-color, #00B4F0);color:var(--primary-font-color, #FFF);@apply --vaadin-upload-button-add;}#addButton[disabled]{background:var(--divider-color, #e0e0e0);color:var(--disabled-text-color, gray);@apply --vaadin-upload-button-add-disabled;}</style><div id="buttons"><div id="buttonsPrimary"><div id="addFiles" on-tap="_onAddFilesClick"><slot name="add-button"><paper-button id="addButton" disabled$="[[maxFilesReached]]">[[_i18nPlural(maxFiles, i18n.addFiles, i18n.addFiles.*)]]</paper-button></slot></div><div id="dropLabel" hidden$="[[nodrop]]"><slot name="drop-label-icon"><iron-icon id="dropLabelIcon" icon="vaadin-upload:file-upload"></iron-icon></slot><slot name="drop-label">[[_i18nPlural(maxFiles, i18n.dropFiles, i18n.dropFiles.*)]]</slot></div></div></div><slot name="file-list"><div id="fileList"><template is="dom-repeat" items="[[files]]" as="file"><vaadin-upload-file file="[[file]]"></vaadin-upload-file></template></div></slot><slot></slot><input type="file" id="fileInput" on-change="_onFileInputChange" hidden="" accept$="{{accept}}" multiple$="[[_isMultiple(maxFiles)]]" capture$="[[capture]]"><paper-ripple id="dragRipple" noink=""></paper-ripple></template></dom-module><script>Polymer({is:"vaadin-upload",properties:{nodrop:{type:Boolean,reflectToAttribute:!0,value:function(){try{return!!document.createEvent("TouchEvent")}catch(e){return!1}}},target:{type:String,value:""},method:{type:String,value:"POST"},headers:{type:Object,value:{}},timeout:{type:Number,value:0},_dragover:{type:Boolean,value:!1,observer:"_dragoverChanged"},files:{type:Array,notify:!0,value:function(){return[]}},maxFiles:{type:Number,value:1/0},maxFilesReached:{type:Boolean,value:!1,notify:!0,readOnly:!0,computed:"_maxFilesAdded(maxFiles, files.length)"},accept:{type:String,value:""},maxFileSize:{type:Number,value:1/0},_dragoverValid:{type:Boolean,value:!1,observer:"_dragoverValidChanged"},formDataName:{type:String,value:"file"},noAuto:{type:Boolean,value:!1},capture:String,i18n:{type:Object,value:function(){return{dropFiles:{one:"Drop file here...",many:"Drop files here..."},addFiles:{one:"Select File",many:"Upload Files"},cancel:"Cancel",error:{tooManyFiles:"Too Many Files.",fileIsTooBig:"File is Too Big.",incorrectFileType:"Incorrect File Type."},uploading:{status:{connecting:"Connecting...",stalled:"Stalled.",processing:"Processing File...",held:"Queued"},remainingTime:{prefix:"remaining time: ",unknown:"unknown remaining time"},error:{serverUnavailable:"Server Unavailable",unexpectedServerError:"Unexpected Server Error",forbidden:"Forbidden"}},units:{size:["B","kB","MB","GB","TB","PB","EB","ZB","YB"]}}}}},listeners:{dragover:"_onDragover",dragleave:"_onDragleave",drop:"_onDrop","file-retry":"_onFileRetry","file-abort":"_onFileAbort","file-remove":"_onFileRemove","file-start":"_onFileStart"},_formatSize:function(bytes){var _Mathlog=Math.log;if("function"===typeof this.i18n.formatSize){return this.i18n.formatSize(bytes)}var base=this.i18n.units.sizeBase||1e3,unit=~~(_Mathlog(bytes)/_Mathlog(base)),dec=Math.max(0,Math.min(3,unit-1)),size=parseFloat((bytes/Math.pow(base,unit)).toFixed(dec));return size+" "+this.i18n.units.size[unit]},_splitTimeByUnits:function(time){for(var unitSizes=[60,60,24,1/0],timeValues=[0],i=0;i<unitSizes.length&&0<time;i++){timeValues[i]=time%unitSizes[i];time=Math.floor(time/unitSizes[i])}return timeValues},_formatTime:function(seconds,split){if("function"===typeof this.i18n.formatTime){return this.i18n.formatTime(seconds,split)}while(3>split.length){split.push(0)}return split.reverse().map(function(number){return(10>number?"0":"")+number}).join(":")},_formatFileProgress:function(file){return file.totalStr+": "+file.progress+"% ("+(0<file.loaded?this.i18n.uploading.remainingTime.prefix+file.remainingStr:this.i18n.uploading.remainingTime.unknown)+")"},_maxFilesAdded:function(maxFiles,numFiles){return 0<=maxFiles&&numFiles>=maxFiles},_dragRippleAction:function(action,event){var rippleActionEvent={detail:{x:event.clientX,y:event.clientY}};if("down"==action){this.$.dragRipple.downAction(rippleActionEvent);var lastRipple=this.$.dragRipple.ripples[this.$.dragRipple.ripples.length-1];if(!lastRipple.hasOwnProperty("radius")){Object.defineProperty(lastRipple,"radius",{get:function(){var width2=this.containerMetrics.width*this.containerMetrics.width,height2=this.containerMetrics.height*this.containerMetrics.height,waveRadius=1.1*Math.sqrt(width2+height2)+5,duration=.9+.2*(waveRadius/300),timeNow=this.mouseInteractionSeconds/duration,size=waveRadius*(1-Math.pow(80,-timeNow));return Math.abs(size)}})}}else{this.$.dragRipple.upAction(rippleActionEvent)}},_onDragover:function(event){event.preventDefault();if(!this.nodrop&&!this._dragover){this._dragoverValid=!this.maxFilesReached;if(this._dragoverValid){this._dragRippleAction("down",event)}this._dragover=!0}event.dataTransfer.dropEffect=!this._dragoverValid||this.nodrop?"none":"copy"},_onDragleave:function(event){if(Polymer.dom(event).rootTarget===this){event.preventDefault();if(this._dragover&&!this.nodrop){this._dragRippleAction("up",event);this._dragover=this._dragoverValid=!1}}},_onDrop:function(event){if(!this.nodrop){event.preventDefault();this._dragRippleAction("up",event);this._dragover=this._dragoverValid=!1;this._dragRippleAction("upAction",event);this._addFiles(event.dataTransfer.files)}},_createXhr:function(){return new XMLHttpRequest},_configureXhr:function(xhr){if("string"==typeof this.headers){try{this.headers=JSON.parse(this.headers)}catch(e){this.headers=void 0}}for(var key in this.headers){xhr.setRequestHeader(key,this.headers[key])}if(this.timeout){xhr.timeout=this.timeout}},_setStatus:function(file,total,loaded,elapsed){file.elapsed=elapsed;file.elapsedStr=this._formatTime(file.elapsed,this._splitTimeByUnits(file.elapsed));file.remaining=Math.ceil(elapsed*(total/loaded-1));file.remainingStr=this._formatTime(file.remaining,this._splitTimeByUnits(file.remaining));file.speed=~~(total/elapsed/1024);file.totalStr=this._formatSize(total);file.loadedStr=this._formatSize(loaded);file.status=this._formatFileProgress(file)},uploadFiles:function(files){files=files||this.files;files=files.filter(function(file){return!file.complete});Array.prototype.forEach.call(files,this._uploadFile.bind(this))},_uploadFile:function(file){if(file.uploading){return}var ini=Date.now(),xhr=file.xhr=this._createXhr(file),stalledId,last;xhr.upload.onprogress=function(e){clearTimeout(stalledId);last=Date.now();var elapsed=(last-ini)/1e3,loaded=e.loaded,total=e.total,progress=~~(100*(loaded/total));file.loaded=loaded;file.progress=progress;file.indeterminate=0>=loaded||loaded>=total;if(file.error){file.indeterminate=file.status=void 0}else if(!file.abort){if(100>progress){this._setStatus(file,total,loaded,elapsed);stalledId=setTimeout(function(){file.status=this.i18n.uploading.status.stalled;this._notifyFileChanges(file)}.bind(this),2e3)}else{file.loadedStr=file.totalStr;file.status=this.i18n.uploading.status.processing;file.uploading=!1}}this._notifyFileChanges(file);this.fire("upload-progress",{file:file,xhr:xhr})}.bind(this);xhr.onreadystatechange=function(){if(4==xhr.readyState){clearTimeout(stalledId);file.indeterminate=file.uploading=!1;if(file.abort){this._notifyFileChanges(file);return}file.status="";var evt=this.fire("upload-response",{file:file,xhr:xhr},{cancelable:!0});if(evt.defaultPrevented){return}if(0===xhr.status){file.error=this.i18n.uploading.error.serverUnavailable}else if(500<=xhr.status){file.error=this.i18n.uploading.error.unexpectedServerError}else if(400<=xhr.status){file.error=this.i18n.uploading.error.forbidden}file.complete=!file.error;this.fire("upload-"+(file.error?"error":"success"),{file:file,xhr:xhr});this._notifyFileChanges(file)}}.bind(this);var formData=new FormData;file.uploadTarget=this.target||"";file.formDataName=this.formDataName;var evt=this.fire("upload-before",{file:file,xhr:xhr},{cancelable:!0});if(evt.defaultPrevented){return}formData.append(file.formDataName,file,file.name);xhr.open(this.method,file.uploadTarget,!0);this._configureXhr(xhr);file.status=this.i18n.uploading.status.connecting;file.uploading=file.indeterminate=!0;file.complete=file.abort=file.error=file.held=!1;xhr.upload.onloadstart=function(){this.fire("upload-start",{file:file,xhr:xhr});this._notifyFileChanges(file)}.bind(this);evt=this.fire("upload-request",{file:file,xhr:xhr,formData:formData},{cancelable:!0});if(!evt.defaultPrevented){xhr.send(formData)}},_retryFileUpload:function(file){var evt=this.fire("upload-retry",{file:file,xhr:file.xhr},{cancelable:!0});if(!evt.defaultPrevented){this.async(this._uploadFile.bind(this,file))}},_abortFileUpload:function(file){var evt=this.fire("upload-abort",{file:file,xhr:file.xhr},{cancelable:!0});if(!evt.defaultPrevented){file.abort=!0;if(file.xhr){file.xhr.abort()}this._notifyFileChanges(file)}},_notifyFileChanges:function(file){var p="files."+this.files.indexOf(file)+".";for(var i in file){if(file.hasOwnProperty(i)){this.notifyPath(p+i,file[i])}}},_addFiles:function(files){Array.prototype.forEach.call(files,this._addFile.bind(this))},_addFile:function(file){if(this.maxFilesReached){this.fire("file-reject",{file:file,error:this.i18n.error.tooManyFiles});return}if(0<=this.maxFileSize&&file.size>this.maxFileSize){this.fire("file-reject",{file:file,error:this.i18n.error.fileIsTooBig});return}var fileExt=file.name.match(/\.[^\.]*$|$/)[0],re=new RegExp("^("+this.accept.replace(/[, ]+/g,"|").replace(/\/\*/g,"/.*")+")$","i");if(this.accept&&!(re.test(file.type)||re.test(fileExt))){this.fire("file-reject",{file:file,error:this.i18n.error.incorrectFileType});return}file.loaded=0;file.held=!0;file.status=this.i18n.uploading.status.held;this.unshift("files",file);if(!this.noAuto){this._uploadFile(file)}},_removeFile:function(file){this.splice("files",this.files.indexOf(file),1)},_onAddFilesClick:function(){if(this.maxFilesReached){return}if(Polymer.Gestures.resetMouseCanceller){Polymer.Gestures.resetMouseCanceller()}this.$.fileInput.value="";this.$.fileInput.click()},_onFileInputChange:function(event){this._addFiles(event.target.files)},_onFileStart:function(event){this._uploadFile(event.detail.file)},_onFileRetry:function(event){this._retryFileUpload(event.detail.file)},_onFileAbort:function(event){this._abortFileUpload(event.detail.file)},_onFileRemove:function(event){event.stopPropagation();this._removeFile(event.detail.file)},_dragoverChanged:function(dragover){this.toggleAttribute("dragover",dragover)},_dragoverValidChanged:function(dragoverValid){this.toggleAttribute("dragover-valid",dragoverValid)},_i18nPlural:function(value,plural){return 1==value?plural.one:plural.many},_isMultiple:function(){return 1!=this.maxFiles}});</script><link rel="import" href="retro-time.html"></div><dom-module id="app-management-view"><template><style include="shared-styles">:host{display:block;padding:10px;--paper-input-container-input:{font-size:1em;};}h1{margin:16px 0 0 24px;padding:0 16px;}h2{margin-top:0;}retro-time{font-size:0.8em;}paper-dropdown-menu{width:22em;}.app-table{margin-top:20px;}.app-table th,
      .app-table td{padding:5px;text-align:left;background-color:#EEE;}.action-buttons{margin-top:20px;}#newAuthor{display:none;}#newAuthor[orig-author-id$="-1"]{display:block;}#addEditAppCard[show$="addEdit"],
      #listAppsCard[show$="list"], 
      #addEditDiskImagesCard[show$="assets"],
      #addEditScreenshotsCard[show$="assets"],
      #addEditDiskImagesButtonPanel[show$="assets"]{display:block;}#addEditAppCard,
      #listAppsCard,
      #addEditDiskImagesCard,
      #addEditScreenshotsCard,
      #addEditDiskImagesButtonPanel{display:none;}#addEditDiskImagesButtonPanel table{width:100%;}#addEditDiskImagesButtonPanel td:nth-child(2){text-align:right;}#server-response[success$="true"]{background:#AFA;}#server-response[success$="false"]{background:#FAA;}#server-response[success$="none"]{display:none;}#server-response{margin:20px 0;padding:1em;display: width:100%;}#addEditAppConfigCard{background-color:#F4F4F4;}#orig
      .disk-image-table td{padding:10px;}</style><h1>App management</h1><div id="addEditAppCard" show$="{{showMode}}" class="card"><h2>Add/Edit app</h2><div id="addEditAppMetaCard" class="card"><h3>App metadata</h3><paper-input name="appId" label="App ID" value="{{form_appId}}" hidden=""></paper-input><paper-input name="appName" label="App name" value="{{form_appName}}" required=""></paper-input><paper-input name="appVersion" label="App version" value="{{form_appVersion}}" required=""></paper-input><paper-textarea name="description" label="Description" value="{{form_description}}" required="" always-float-label=""></paper-textarea><paper-input name="releaseYear" label="Release year" value="{{form_releaseYear}}"></paper-input><paper-dropdown-menu name="origAuthor" label="Original Author" required=""><paper-listbox slot="dropdown-content" selected="{{form_origAuthorId}}" attr-for-selected="value"><paper-item value="-1">Other (Enter below)</paper-item><template is="dom-repeat" items="{{formData.existingAppAuthors}}"><paper-item value="{{item.value}}">{{item.name}}</paper-item></template></paper-listbox></paper-dropdown-menu><br><paper-input id="newAuthor" name="newAuthor" label="New author" value="{{form_newAuthor}}" orig-author-id$="{{form_origAuthorId}}" required=""></paper-input><paper-dropdown-menu name="category" label="Category" required=""><paper-listbox slot="dropdown-content" selected="{{form_category}}" attr-for-selected="value"><template is="dom-repeat" items="{{formData.appListingCategories}}"><paper-item value="{{item.value}}">{{item.name}}</paper-item></template></paper-listbox></paper-dropdown-menu><br></div><div id="addEditAppConfigCard" class="card"><h3>Configuration details (TRS 80)</h3><paper-dropdown-menu name="model" label="Model" required=""><paper-listbox slot="dropdown-content" selected="{{form_model}}" attr-for-selected="value"><template is="dom-repeat" items="{{formData.trsModels}}"><paper-item value="{{item.value}}">{{item.name}}</paper-item></template></paper-listbox></paper-dropdown-menu><br></div><div class="action-buttons"><div id="server-response" success$="{{addEditSuccess}}">{{addEditXhrResponse.message}}</div><paper-button on-tap="onSaveApp" class="action-edit">Save changes</paper-button><paper-button on-tap="onCancelAddEdit" class="action-cancel">Cancel</paper-button></div></div><div id="addEditDiskImagesButtonPanel" class="card" show$="{{showMode}}"><table><tbody><tr><td><h3>Assets for "{{assets_appName}}"</h3></td><td><paper-button on-tap="onBackToAppList" class="action">Back to app list</paper-button></td></tr></tbody></table></div><div id="addEditDiskImagesCard" class="card" show$="{{showMode}}"><h3>Disk images (TRS 80)</h3><table class="disk-image-table"><tbody><tr><th>Disk Image</th><th>Name</th><th>Uploaded</th><th>Size</th><th>Upload</th><th>Delete</th></tr><template is="dom-repeat" items="{{diskImages}}"><tr><td>{{item.label}}</td><td>{{item.name}}</td><td><retro-time millis="{{item.uploadTime}}"></retro-time></td><td>{{item.sizeInBytes}}</td><td><paper-button on-tap="onUploadDiskImage" class="action-edit">Upload</paper-button></td><td><paper-button on-tap="onDeleteDiskImage" class="action-delete">Delete</paper-button></td></tr></template></tbody></table></div><div id="addEditScreenshotsCard" class="card" show$="{{showMode}}"><h3>Screenshots</h3><table class="disk-image-table"><template is="dom-repeat" items="{{screenshots}}"><tr><td><img src="/screenshotServe?key={{item}}" width="200px"></td><td></td><td><paper-button on-tap="onReorderScreenshotUp" class="action-edit">⇧</paper-button></td><td><paper-button on-tap="onReorderScreenshotDown" class="action-edit">⇩</paper-button></td><td><paper-button on-tap="onDeleteScreenshot" class="action-delete">Delete</paper-button></td></tr></template></table><paper-button id="uploadScreenshotButton" on-tap="onUploadScreenshot" class="action-edit">Upload Screenshot</paper-button></div><paper-dialog id="uploadDialog" on-iron-overlay-opened="_patchOverlay" modal=""><p>{{model_dialog_text}}</p><vaadin-upload id="fileUpload" target="/post/uploadDiskImage/{{assets_appId}}/{{upload_item.id}}" max-files="1" method="POST" maxfilesize="10000000"><iron-icon slot="drop-label-icon" icon="cloud-upload"></iron-icon><span slot="drop-label">{{upload_item.label}}</span></vaadin-upload><div class="buttons"><paper-button id="cancelUpload" dialog-confirm="" autofocus="">Cancel</paper-button></div></paper-dialog><paper-dialog id="uploadScreenshotDialog" on-iron-overlay-opened="_patchOverlay" modal=""><p>Upload new screenshot</p><vaadin-upload id="screenshotUpload" target="{{screenshotUploadUrl}}" max-files="1" method="POST" maxfilesize="10000000"><iron-icon slot="drop-label-icon" icon="cloud-upload"></iron-icon><span slot="drop-label">{{upload_item.label}}</span></vaadin-upload><div class="buttons"><paper-button id="cancelUpload" dialog-confirm="" autofocus="">Cancel</paper-button></div></paper-dialog><div id="listAppsCard" show$="{{showMode}}" class="card"><div class="action-bar&quot;" style="float: right"><paper-button on-click="onAddApp" raised="" class="action">Add app</paper-button></div><h2>App list</h2><table class="app-table"><tbody><tr><th>Name</th><th>Publisher</th><th>Version</th><th>First uploaded</th><th>Last updated</th><th>Edit</th><th>Assets</th><th>Delete</th></tr><template is="dom-repeat" items="{{ajaxResponse}}"><tr><td>{{item.listing.name}}</td><td>{{item.listing.publisherEmail}}</td><td>{{item.listing.versionString}}</td><td><retro-time millis="{{item.listing.firstPublishTime}}"></retro-time></td><td><retro-time millis="{{item.listing.lastUpdateTime}}"></retro-time></td><td><paper-button on-tap="onEditApp" class="action-edit">Edit</paper-button></td><td><paper-button on-tap="onAssetsApp" class="action-edit">Assets</paper-button></td><td><paper-button on-tap="onDeleteApp" class="action-delete">Delete</paper-button></td></tr></template></tbody></table></div><iron-ajax auto="" id="xhrFormData" url="/rpc?m=getAppFormData" handle-as="json" debounce-duration="300" last-response="{{formData}}"></iron-ajax><iron-ajax auto="" id="xhrAppList" url="/rpc?m=applist" handle-as="json" debounce-duration="300" last-response="{{ajaxResponse}}"></iron-ajax><iron-ajax id="xhrAddEditApp" url="/rpc?m=addEditApp" method="POST" handle-as="json" on-response="onAddEditResponse" content-type="application/json" last-response="{{addEditXhrResponse}}"></iron-ajax><iron-ajax id="xhrDeleteApp" url="/rpc?m=deleteApp" method="POST" handle-as="json" on-response="onDeleteResponse" content-type="application/json" last-response="{{deleteXhrResponse}}"></iron-ajax><iron-ajax id="xhrListDiskImages" noauto="" url="/rpc?m=listDiskImages&amp;appId={{requestDiskImagesAppId}}" handle-as="json" debounce-duration="1000" last-response="{{diskImages}}"></iron-ajax><iron-ajax id="xhrDeleteDiskImage" noauto="" url="/rpc?m=deleteDiskImage&amp;appId={{deleteDiskImageAppId}}&amp;diskImageNo={{deleteDiskImageNo}}" handle-as="json" on-response="onDeleteDiskImageResponse" debounce-duration="1000"></iron-ajax><iron-ajax id="xhrListScreenshots" noauto="" url="/rpc?m=listScreenshots&amp;appId={{assets_appId}}" handle-as="json" debounce-duration="1000" last-response="{{screenshots}}"></iron-ajax><iron-ajax id="xhrGetScreenshotUploadUrl" noauto="" url="/screenshotUrlForUpload?appId={{assets_appId}}" handle-as="json" debounce-duration="1000" on-response="onScreenshotUploadUrl" last-response="{{screenshotUploadUrl}}"></iron-ajax><iron-ajax id="xhrDeleteScreenshot" noauto="" url="/rpc?m=deleteScreenshot&amp;appId={{assets_appId}}&amp;blobKey={{deleteScreenshotKey}}" handle-as="json" on-response="onScreenshotDeleteResponse" debounce-duration="1000"></iron-ajax><iron-ajax id="xhrReorderScreenshot" noauto="" url="/rpc?m=reorderScreenshots&amp;appId={{assets_appId}}&amp;blobKey={{reorderScreenshotKey}}&amp;direction={{reorderScreenshotDir}}" handle-as="json" on-response="onScreenshotReorderResponse" debounce-duration="500"></iron-ajax></template><script>class AppManagementView extends Polymer.Element{static get is(){return"app-management-view"}ready(){super.ready();this.showMode="list";this.clearForm();this.diskImages=[];var thiz=this;this.$.uploadDialog.addEventListener("upload-start",function(e){thiz.$.cancelUpload.disabled=!0});this.$.uploadDialog.addEventListener("upload-response",function(e){thiz.$.xhrListDiskImages.generateRequest();thiz.$.cancelUpload.disabled=!1;thiz.$.fileUpload.files=[];thiz.$.uploadDialog.close()});this.$.uploadScreenshotDialog.addEventListener("upload-response",function(e){thiz.$.xhrListScreenshots.generateRequest();thiz.$.screenshotUpload.files=[];thiz.$.uploadScreenshotDialog.close()})}onBackToAppList(){this.$.xhrAppList.generateRequest();this.showMode="list"}onAddApp(){this.clearForm();this.showMode="addEdit"}onAssetsApp(e){this.clearForm();this.assets_appId=e.model.get("item.id");this.assets_appName=e.model.get("item.listing.name");this.showMode="assets";this.requestDiskImagesAppId=this.assets_appId;this.$.xhrListDiskImages.generateRequest();this.$.xhrListScreenshots.generateRequest()}onEditApp(e){this.clearForm();this.form_appId=e.model.get("item.id");this.form_appName=e.model.get("item.listing.name");this.form_appVersion=e.model.get("item.listing.versionString");this.form_description=e.model.get("item.listing.description");this.form_releaseYear=e.model.get("item.listing.releaseYear");this.form_origAuthorId=e.model.get("item.listing.authorId");this.form_newAuthor="";this.form_category=e.model.get("item.listing.categories")[0];this.form_model=e.model.get("item.trs80Extension.model");this.showMode="addEdit"}onDeleteApp(e){var idStr=e.model.get("item.id"),name=e.model.get("item.listing.name");if(confirm(`Are you sure you want to delete ${name} (${idStr})?`)){var data={id:idStr};this.$.xhrDeleteApp.body=JSON.stringify(data);this.$.xhrDeleteApp.generateRequest()}else{}}onSaveApp(){var data={appId:this.form_appId,appName:this.form_appName,appVersion:this.form_appVersion,description:this.form_description,releaseYear:this.form_releaseYear,origAuthorId:this.form_origAuthorId,newAuthor:this.form_newAuthor,category:this.form_category,model:this.form_model};this.$.xhrAddEditApp.body=JSON.stringify(data);this.$.xhrAddEditApp.generateRequest()}onCancelAddEdit(){this.onBackToAppList()}onAddEditResponse(){this.addEditSuccess=""+this.addEditXhrResponse.success;if(this.addEditXhrResponse.success){this.onBackToAppList();this.$.xhrFormData.generateRequest()}}onDeleteResponse(){if(!this.deleteXhrResponse.success){alert("Delete failed: "+this.deleteXhrResponse.message)}else{this.$.xhrAppList.generateRequest()}}onUploadDiskImage(e){this.upload_item=e.model.get("item");this.$.uploadDialog.open()}onDeleteDiskImage(e){this.deleteDiskImageAppId=this.assets_appId;this.deleteDiskImageNo=e.model.get("item.id");this.$.xhrDeleteDiskImage.generateRequest()}onDeleteDiskImageResponse(){this.$.xhrListDiskImages.generateRequest()}onUploadScreenshot(){this.$.uploadScreenshotButton.disabled=!0;this.$.xhrGetScreenshotUploadUrl.generateRequest()}onScreenshotUploadUrl(){this.$.uploadScreenshotButton.disabled=!1;this.$.uploadScreenshotDialog.open()}onDeleteScreenshot(e){if(confirm("Are you sure you want to delete this Screenshot?")){this.deleteScreenshotKey=e.model.get("item");this.$.xhrDeleteScreenshot.generateRequest()}else{}}onScreenshotDeleteResponse(){this.$.xhrListScreenshots.generateRequest()}onReorderScreenshotUp(e){this.reorderScreenshotDir="up";this.reorderScreenshotKey=e.model.get("item");this.$.xhrReorderScreenshot.generateRequest()}onReorderScreenshotDown(e){this.reorderScreenshotDir="down";this.reorderScreenshotKey=e.model.get("item");this.$.xhrReorderScreenshot.generateRequest()}onScreenshotReorderResponse(){this.$.xhrListScreenshots.generateRequest()}clearForm(){this.addEditSuccess="none";this.form_appId="";this.form_appName="";this.form_appVersion="";this.form_description="";this.form_releaseYear="";this.form_origAuthorId="-1";this.form_newAuthor="";if(!!this.formData){this.form_category=this.formData.appListingCategories[0].value;this.form_model=this.formData.trsModels[0].value}}_patchOverlay(e){if(e.target.withBackdrop){e.target.parentNode.insertBefore(e.target.backdropElement,e.target)}}}window.customElements.define(AppManagementView.is,AppManagementView);</script></dom-module></body></html>